{% extends 'base.html' %}
{% load static %}
{% load widget_tweaks %}
{% block content %}

<div class="d-flex flex-column flex-grow-1 justify-content-between align-items-center py-3">

  <div class="card shadow-lg border-0 w-50">
    <div class="card-header bg-primary text-white text-center">
      <h3 class="mb-0">
        {% if object %}Editar Cliente{% else %}Cadastrar Cliente{% endif %}
      </h3>
    </div>
    <div class="card-body">
      <form method="post" novalidate>
        {% csrf_token %}

        {% if form.non_field_errors %}
        <div class="alert alert-danger">
          <ul class="mb-0">
            {% for error in form.non_field_errors %}
            <li>{{ error }}</li>
            {% endfor %}
          </ul>
        </div>
        {% endif %}

        <div class="mb-3">
          <label for="id_tipoCliente" class="form-label">Tipo de Cliente</label>
          {{ form.tipoCliente|add_class:"form-select" }}
        </div>

        <div class="mb-3">
          <label for="id_nome" class="form-label">Nome</label>
          {{ form.nome|add_class:"form-control" }}
        </div>

        <div class="mb-3">
          <label for="id_telefone" class="form-label">Telefone</label>
          {{ form.telefone|add_class:"form-control" }}
        </div>

        <div class="mb-3">
          <label for="id_email" class="form-label">E-mail</label>
          {{ form.email|add_class:"form-control" }}
        </div>

        <div id="campoPF" class="mb-3" style="display:none;">
          <label for="id_cpf" class="form-label">CPF</label>
          {{ form.cpf|add_class:"form-control" }}
        </div>

        <div id="campoPJ" class="mb-3" style="display:none;">
          <label for="id_cnpj" class="form-label">CNPJ</label>
          {{ form.cnpj|add_class:"form-control" }}
        </div>

        <div class="text-center mt-4">
          <button type="submit" class="btn btn-success px-4 me-2">ðŸ’¾ Salvar</button>
          <a href="{% url 'clientes' %}" class="btn btn-secondary px-4">Cancelar</a>
        </div>
      </form>
    </div>
  </div>



</div>

<script>
  const tipo = document.getElementById("id_tipoCliente");
  const pf = document.getElementById("campoPF");
  const pj = document.getElementById("campoPJ");

  function atualizarCampos() {
    if (tipo.value === 'PF') {
      pf.style.display = "block";
      pj.style.display = "none";
    } else if (tipo.value === 'PJ') {
      pf.style.display = "none";
      pj.style.display = "block";
    } else {
      pf.style.display = "none";
      pj.style.display = "none";
    }
  }

  window.addEventListener('DOMContentLoaded', atualizarCampos);
  tipo.addEventListener('change', atualizarCampos);
</script>

{% endblock %}
