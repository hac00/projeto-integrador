{% extends 'base.html' %}
{% load static %}
{% load django_bootstrap5 %}

{% block content %}
<div class="container py-4">

    <!-- Cabeçalho -->
    <div class="d-flex justify-content-between align-items-center mb-4">
        <h2 class="mb-0">Funcionários</h2>
        <a href="{% url 'funcionario_adicionar' %}" class="btn btn-primary">
            + Novo Funcionário
        </a>
    </div>

    <form method="GET">
      <div class="d-flex justify-content-between mb-4">
        <input class="form-control" type="text" name="buscar" value="{{ request.GET.buscar }}" placeholder="Digite o nome do funcionario">
        <button class="btn btn-dark ms-3">Buscar</button>
      </div>
    </form>

    
  <div class="table-responsive shadow-sm">
    <table class="table table-hover table-striped table-bordered align-middle">
      <thead class="table-light">
          <tr>
              <th>Nome</th>
              <th>Telefone</th>
              <th>Email</th>
              <th>CPF</th>
              <th>Data Admissão</th>
              <th>Data Demissão</th>
              <th>Ativo</th>
              <th class="text-center">Ações</th>
          </tr>
      </thead>
      <tbody id="tabelaFuncionarios">
          {% for funcionario in funcionarios %}
          <tr>

              <td><a href="{% url 'funcionario_detalhe' funcionario.pk %}">{{ funcionario.nome }}</a></td>
              <td>{{ funcionario.telefone }}</td>
              <td>{{ funcionario.email }}</td>
              <td>{{ funcionario.cpf }}</td>
              <td>{{ funcionario.data_admissao }}</td>
              <td>{{ funcionario.data_demissao|default:"-" }}</td>
              <td>{% if funcionario.ativo %}Ativo{% else %}Inativo{% endif %}</td>
              <td class="text-center">
                  <a href="{% url 'funcionario_editar' funcionario.pk %}" class="btn btn-sm btn-outline-secondary">Editar</a>
                  <a href="{% url 'funcionario_deletar' funcionario.pk %}" class="btn btn-sm btn-outline-danger">Excluir</a>
              </td>
          </tr>
          {% empty %}
          <tr>
              <td colspan="8" class="text-center text-muted py-4">
                  Nenhum funcionário cadastrado.
              </td>
          </tr>
          {% endfor %}
      </tbody>
    </table>
  </div>
  <div class="d-flex justify-content-center">
    {% bootstrap_pagination object_list url="/funcionarios?page=1" size="sm" %}
  </div>
</div>

{% endblock %}